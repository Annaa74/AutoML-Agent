<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoML Agent Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Modern Professional (Grays, Blues, Accents) -->
    <!-- Application Structure Plan: The SPA-like structure for this Django frontend features a consistent top navigation bar and a left sidebar for primary navigation (Dashboard, New Project, My Models, Data Management). The main content area dynamically updates based on sidebar selection, creating a single-page application feel. This structure provides clear organization for typical ML platform functionalities: project overview, model training initiation, managing trained models, and data handling. The design prioritizes ease of access to core AutoML functions and a clean, scalable layout suitable for enterprise use. -->
    <!-- Visualization & Content Choices:
        - Dashboard: Goal: Inform -> Viz/Method: Text summary, placeholder for key metrics -> Interaction: None -> Justification: Provides a quick overview. Method: HTML/Tailwind.
        - New Project: Goal: Task Execution -> Viz/Method: Form inputs (file upload, text area for prompt), status display, API endpoint display -> Interaction: Form submission, button clicks for training/copying -> Justification: Core user interaction for initiating AutoML. Method: HTML/Tailwind, Vanilla JS for dynamic updates.
        - My Models: Goal: Organize/Inform -> Viz/Method: Placeholder for a list/table of models -> Interaction: Clickable rows for details (future) -> Justification: Centralized view of user's assets. Method: HTML/Tailwind.
        - Data Management: Goal: Organize/Inform -> Viz/Method: Placeholder for data file list -> Interaction: None (for this basic version) -> Justification: Provides a logical place for data interactions. Method: HTML/Tailwind.
        - Charts: Placeholder for Chart.js integration, ready for future data visualizations. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 450px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: background-color 0.2s ease, color 0.2s ease; }
        .nav-link.active { background-color: #e0f2fe; color: #1e40af; border-left-color: #2563eb; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">

    <header class="bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <div class="text-2xl font-bold text-gray-900">AutoML Agent</div>
            <div class="flex items-center space-x-4">
                <span class="text-gray-700 hidden sm:block">Welcome, User!</span>
                <button class="px-4 py-2 rounded-md bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors">Logout</button>
            </div>
        </div>
    </header>

    <div class="flex flex-1">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white shadow-md p-6 border-r border-gray-200">
            <nav class="space-y-2">
                <a href="#" id="nav-dashboard" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-50 active active-link border-l-4 border-transparent">
                    <span class="mr-3">&#9776;</span> Dashboard
                </a>
                <a href="#" id="nav-new-project" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-50 border-l-4 border-transparent">
                    <span class="mr-3">&#9999;&#xFE0E;</span> New Project
                </a>
                <a href="#" id="nav-my-models" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-50 border-l-4 border-transparent">
                    <span class="mr-3">&#128218;</span> My Models
                </a>
                <a href="#" id="nav-data-management" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-50 border-l-4 border-transparent">
                    <span class="mr-3">&#128452;&#xFE0E;</span> Data Management
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 md:p-8 overflow-y-auto">
            
            <section id="dashboard-content" class="content-section bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Dashboard Overview</h2>
                <p class="text-lg text-gray-600 mb-4">Welcome to your AutoML Agent platform! Here you can get a quick overview of your projects and model training activities.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                        <h3 class="font-semibold text-blue-800 text-xl">Total Projects</h3>
                        <p class="text-4xl font-bold text-blue-600 mt-2">12</p>
                    </div>
                    <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                        <h3 class="font-semibold text-green-800 text-xl">Models Deployed</h3>
                        <p class="text-4xl font-bold text-green-600 mt-2">8</p>
                    </div>
                    <div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                        <h3 class="font-semibold text-yellow-800 text-xl">Training in Progress</h3>
                        <p class="text-4xl font-bold text-yellow-600 mt-2">1</p>
                    </div>
                </div>
                <div class="mt-8 text-center text-gray-500">
                    <p>Dive into "New Project" to start automating your next ML model!</p>
                </div>
            </section>

            <section id="new-project-content" class="content-section bg-white p-8 rounded-lg shadow-lg hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">New Model Training</h2>
                <p class="text-lg text-gray-600 mb-6">Define your machine learning task by uploading your dataset and providing a natural language prompt. Our agent will automate the model selection and training process for you.</p>

                <div class="space-y-6">
                    <div>
                        <label for="dataset-upload" class="block text-gray-700 text-sm font-semibold mb-2">Upload Dataset (CSV, Excel, etc.):</label>
                        <input type="file" id="dataset-upload" class="block w-full text-gray-700 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept=".csv, .xlsx, .xls">
                        <p class="mt-1 text-sm text-gray-500">Max file size: 50MB. Supported formats: .csv, .xlsx, .xls</p>
                    </div>

                    <div>
                        <label for="prompt-input" class="block text-gray-700 text-sm font-semibold mb-2">Natural Language Prompt:</label>
                        <textarea id="prompt-input" rows="5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400" placeholder="e.g., 'Predict customer churn based on historical transaction data, optimizing for recall.' or 'Build a regression model to forecast quarterly sales using the last 5 years of sales figures.'"></textarea>
                        <p class="mt-1 text-sm text-gray-500">Describe your ML task, target variable, and any specific requirements.</p>
                    </div>

                    <button id="start-training-button" class="w-full md:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors">
                        Start Training
                    </button>
                </div>

                <div id="training-status-area" class="mt-8 p-6 bg-gray-50 border border-gray-200 rounded-lg hidden">
                    <h3 class="text-xl font-semibold text-gray-800 mb-3">Training Status:</h3>
                    <p id="status-message" class="text-gray-700 mb-4">Awaiting input...</p>
                    <div id="loading-spinner" class="hidden flex items-center justify-center space-x-2">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
                        <span class="text-blue-600">Training model...</span>
                    </div>
                    <div id="model-output" class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                        <h3 class="text-xl font-semibold text-blue-800">Deployed Model API Endpoint:</h3>
                        <p id="api-endpoint-display" class="mt-2 p-3 bg-white rounded-md text-gray-700 font-mono break-all text-sm"></p>
                        <button id="copy-api-button" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors">Copy to Clipboard</button>
                    </div>
                     <div id="error-message" class="mt-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 hidden">
                        <h3 class="font-semibold mb-2">Error:</h3>
                        <p id="error-details"></p>
                    </div>
                </div>
            </section>

            <section id="my-models-content" class="content-section bg-white p-8 rounded-lg shadow-lg hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">My Trained Models</h2>
                <p class="text-lg text-gray-600 mb-6">View and manage all your deployed machine learning models. You can inspect their details, performance metrics, and retrieve their API endpoints here.</p>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                        <thead>
                            <tr class="bg-gray-50 border-b border-gray-200">
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Model Name</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Type</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deployed On</th>
                                <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <!-- Example Row - Replace with Django loop for actual data -->
                            <tr>
                                <td class="py-4 px-4 whitespace-nowrap text-sm font-medium text-gray-900">Churn Predictor V1</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-gray-500">Classification</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-green-600 font-semibold">Active</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-gray-500">2025-06-20</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm font-medium">
                                    <button class="text-blue-600 hover:text-blue-900 mr-2">View</button>
                                    <button class="text-red-600 hover:text-red-900">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-4 px-4 whitespace-nowrap text-sm font-medium text-gray-900">Sales Forecast V2</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-gray-500">Regression</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-green-600 font-semibold">Active</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm text-gray-500">2025-06-22</td>
                                <td class="py-4 px-4 whitespace-nowrap text-sm font-medium">
                                    <button class="text-blue-600 hover:text-blue-900 mr-2">View</button>
                                    <button class="text-red-600 hover:text-red-900">Delete</button>
                                </td>
                            </tr>
                            <!-- End Example Rows -->
                        </tbody>
                    </table>
                </div>
                <div class="mt-8 text-center text-gray-500">
                    <p>Your trained models will appear here after successful deployment.</p>
                </div>
            </section>

            <section id="data-management-content" class="content-section bg-white p-8 rounded-lg shadow-lg hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Data Management</h2>
                <p class="text-lg text-gray-600 mb-6">Manage your uploaded datasets here. You can view existing files or upload new ones for use in your AutoML projects.</p>
                <div class="space-y-4">
                    <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg">
                        <h3 class="font-semibold text-gray-800">Uploaded Files:</h3>
                        <ul class="list-disc list-inside mt-2 text-gray-700">
                            <li>customer_data.csv (5.2 MB)</li>
                            <li>housing_prices.xlsx (2.1 MB)</li>
                            <li>sales_history.csv (10.5 MB)</li>
                            <!-- Replace with Django loop for actual data -->
                        </ul>
                    </div>
                    <button class="w-full md:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors">
                        Upload New Data
                    </button>
                </div>
            </section>

        </main>
    </div>

    <footer class="bg-gray-800 mt-auto py-6 text-center text-gray-300 text-sm">
        <p>&copy; 2025 AutoML Agent Platform. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const startTrainingButton = document.getElementById('start-training-button');
            const trainingStatusArea = document.getElementById('training-status-area');
            const statusMessage = document.getElementById('status-message');
            const loadingSpinner = document.getElementById('loading-spinner');
            const modelOutput = document.getElementById('model-output');
            const apiEndpointDisplay = document.getElementById('api-endpoint-display');
            const copyApiButton = document.getElementById('copy-api-button');
            const errorMessageDiv = document.getElementById('error-message');
            const errorDetails = document.getElementById('error-details');

            function showSection(id) {
                contentSections.forEach(section => {
                    section.classList.add('hidden');
                });
                document.getElementById(`${id}-content`).classList.remove('hidden');

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    link.classList.remove('border-l-blue-600');
                    link.classList.add('border-transparent');
                });
                const activeLink = document.getElementById(`nav-${id}`);
                if (activeLink) {
                    activeLink.classList.add('active');
                    activeLink.classList.remove('border-transparent');
                    activeLink.classList.add('border-l-blue-600');
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = e.currentTarget.id.replace('nav-', '');
                    showSection(sectionId);
                });
            });

            // Initial view
            showSection('dashboard');

            // Simulate API call for training (replace with actual fetch to Django backend)
            startTrainingButton.addEventListener('click', async () => {
                const prompt = document.getElementById('prompt-input').value;
                const datasetFile = document.getElementById('dataset-upload').files[0];

                if (!prompt.trim()) {
                    errorMessageDiv.classList.remove('hidden');
                    errorDetails.textContent = 'Please provide a natural language prompt.';
                    return;
                }
                if (!datasetFile) {
                    errorMessageDiv.classList.remove('hidden');
                    errorDetails.textContent = 'Please upload a dataset file.';
                    return;
                }

                trainingStatusArea.classList.remove('hidden');
                modelOutput.classList.add('hidden');
                errorMessageDiv.classList.add('hidden');
                statusMessage.textContent = 'Initiating model training...';
                loadingSpinner.classList.remove('hidden');
                startTrainingButton.disabled = true;

                // In a real Django app, you'd send this data to a Django view
                // Example: const formData = new FormData();
                // formData.append('prompt', prompt);
                // formData.append('dataset', datasetFile);
                // const response = await fetch('/api/train_model/', { method: 'POST', body: formData });
                // const data = await response.json();
                // const jobId = data.job_id;

                // For demonstration, simulate a delay and a successful API endpoint
                console.log('Simulating training with prompt:', prompt, 'and dataset:', datasetFile.name);
                await new Promise(resolve => setTimeout(resolve, 3000)); // Simulate API call delay

                const simulatedJobId = 'job_xyz_123';
                statusMessage.textContent = `Training initiated. Job ID: ${simulatedJobId}. Polling for status...`;

                // Simulate polling for status
                let pollCount = 0;
                const maxPolls = 5;
                const pollInterval = setInterval(async () => {
                    pollCount++;
                    if (pollCount <= maxPolls) {
                        statusMessage.textContent = `Training in progress (Stage ${pollCount}/${maxPolls})...`;
                        // In a real Django app, you'd fetch status:
                        // const statusResponse = await fetch(`/api/model_status/${simulatedJobId}`);
                        // const statusData = await statusResponse.json();
                        // if (statusData.status === 'completed') { ... } else if (statusData.status === 'failed') { ... }

                        if (pollCount === maxPolls) {
                            clearInterval(pollInterval);
                            loadingSpinner.classList.add('hidden');
                            statusMessage.textContent = 'Model training and deployment complete!';
                            modelOutput.classList.remove('hidden');
                            const simulatedApiEndpoint = `https://api.your-platform.com/models/${simulatedJobId}/predict`;
                            apiEndpointDisplay.textContent = simulatedApiEndpoint;
                            startTrainingButton.disabled = false;
                        }
                    } else {
                        clearInterval(pollInterval); // Should not happen with maxPolls check, but as a safeguard
                    }
                }, 2000); // Poll every 2 seconds
            });

            copyApiButton.addEventListener('click', () => {
                const textToCopy = apiEndpointDisplay.textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert('API endpoint copied to clipboard!'); // Replace with custom modal later
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    alert('Failed to copy. Please copy manually.'); // Replace with custom modal later
                });
            });
        });
    </script>
</body>
</html>
